<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-route.min.js"></script>
    <style>
        .search-container {
            text-align: center;
            margin-top: 50px;
            /* Adjust as needed */
        }

        .search-container form {
            display: inline-block;
        }

        .search-container input[type="text"] {
            width: 500px;
            /* Adjust as needed */
            height: 50px;
            /* Adjust as needed */
            padding: 10px;
            border-radius: 50px;
            /* Rounded corners */
            border: 1px solid #ccc;
            outline: none;
            transition: border-color 0.3s;
        }

        .search-container input[type="text"]:focus {
            border-color: #666;
        }

        .search-container button {
            height: 50px;
            /* Adjust as needed */
            border-radius: 50px;
            /* Rounded corners */
            border: none;
            background-color: black;
            color: #fff;
            padding: 0 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .search-container button:hover {
            background-color: #0056b3;
        }

        .suggestions-container {
            text-align: left;
            margin-top: 20px;
            /* margin-bottom: 60px; */
            padding: 0 20px;
        }

        .suggestions-container h2 {
            font-weight: bold;
        }

        .book-grid {
            display: flex;
            flex-wrap: wrap;
            margin-top: 20px;
            justify-content: space-between;
        }

        .book-container {
            width: calc(20% - 20px);
            /* Adjust as needed */
            margin-bottom: 30px;
            text-align: center;
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 10px;
        }

        .book-container img {
            width: 200px;
            height: 300px;

            margin-bottom: 10px;
        }

        .book-title {
            margin: 0;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .book-author {
            margin: 0;
            font-size: 14px;
            font-weight: bold;
        }
    </style>
    <title>Login-Form</title>
</head>

<body ng-app="bookApp">

    <header id="header">
        <div class="logo"><a href="">Minimal</a> </div>
        <div class="hamburger" id="toggle">
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
        </div>
        <nav class="nav-bar" id="navbar">
            <ul>
                <li>
                    <a href="index.html" class="active">Home</a>
                </li>
                <li>
                    <a href="readlist">Read List</a>
                </li>
                <li>
                    <a href="wishlist">Wishlist</a>
                </li>
                <li>
                    <a href="#contact">Contact</a>
                </li>
                <div class="login">
                    <li>
                        <a href="login" class="navlogin active">Login</a>
                    </li>
                </div>
            </ul>
        </nav>
    </header>
    <div ng-controller="HomeController">
        <div class="search-container">
            <form>
                <input type="text" id="search" name="search" placeholder="Search...">
                <button type="submit" ng-click="search()">Search</button>
            </form>
        </div>
        <div class="suggestions-container">
            <h2>Suggestions for you</h2>
            <div class="book-grid">
                <div ng-repeat="book in books | filter: searchText" class="book-container">
                    <!-- <a href="#/bookdetail.html/{{ book.bookId }}" ng-click="fetchBookDetails(book.bookId)"> -->
                        <img ng-src="{{ book.image_url }}" class="book-cover" alt="Book Cover"
                            onerror="this.src='placeholder.jpg'" />
                    <!-- </a> -->
                    <h2 class="book-title">{{ book.title }}</h2>
                    <p class="book-author">Author: {{ book.authors }}</p>
                    <!-- <p class="book-author">Ratings: {{ book.ratings }}</p> -->
                </div>
            </div>
        </div>
    </div>
    <script>
        angular.module("bookApp", []).controller("HomeController", [
            "$scope",
            "$http",
            function ($scope, $http) {
                $scope.books = [];

                // $routeProvider
                //     .when("/", { // Route for home page (already defined)
                //         templateUrl: "index.html",
                //         controller: "HomeController"
                //     })
                //     .when("/bookdetail/:bookId", { // Route for book detail page
                //         templateUrl: "bookdetail.html", // Replace with your book detail template name
                //         controller: "BookDetailController" // Define a new controller for book details
                //     })
                //     .otherwise({ // Route for any undefined routes
                //         redirectTo: "/"
                //     });

                $http
                    .get(
                        "https://raw.githubusercontent.com/zygmuntz/goodbooks-10k/master/books.csv",
                        { responseType: "text" }
                    )
                    .then(function (response) {
                        var lines = response.data.split("\n");
                        var headers = lines[0].split(",");

                        for (var i = 1; i < lines.length; i++) {
                            var bookData = lines[i].split(",");
                            var imageUrl = bookData[23];
                            var bookId = bookData[0] // image URL is in the 22nd column

                            // Check if the image URL is not empty
                            if (imageUrl && imageUrl.trim() !== "") {
                                $scope.books.push({
                                    title: bookData[10],
                                    authors: bookData[7],
                                    image_url: imageUrl,
                                    // ratings: bookData[13],
                                });
                            }
                        }
                    })
                    .catch(function (error) {
                        console.error("Error fetching book details:", error);
                    });
            },
        ]);
    </script>

    <!-- <script src="javascript/index.js"></script> -->
</body>

</html>